"use strict";(self.webpackChunkModDocCE=self.webpackChunkModDocCE||[]).push([[350],{8453:(e,a,i)=>{i.d(a,{R:()=>o,x:()=>r});var s=i(6540);const t={},n=s.createContext(t);function o(e){const a=s.useContext(n);return s.useMemo((function(){return"function"==typeof e?e(a):{...a,...e}}),[a,e])}function r(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),s.createElement(n.Provider,{value:a},e.children)}},8611:(e,a,i)=>{i.r(a),i.d(a,{assets:()=>l,contentTitle:()=>r,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"tutorials/pak_tutorial/pak_tutorial","title":"Unpacking and Repacking Game Files","description":"This guide serves to provide a very basic guide to unpacking and repacking the game\'s asset files (contained in res.pak).","source":"@site/docs/tutorials/pak_tutorial/pak_tutorial.md","sourceDirName":"tutorials/pak_tutorial","slug":"/tutorials/pak_tutorial/","permalink":"/ModDocCE/tutorials/pak_tutorial/","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"Tutorials","permalink":"/ModDocCE/category/tutorials"},"next":{"title":"Using crashlink","permalink":"/ModDocCE/tutorials/crashlink"}}');var t=i(4848),n=i(8453);const o={sidebar_position:1},r="Unpacking and Repacking Game Files",l={},d=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"What is a PAK file?",id:"what-is-a-pak-file",level:2},{value:"PAK File Versions",id:"pak-file-versions",level:3},{value:"Getting a Better PAKTool",id:"getting-a-better-paktool",level:2},{value:"Unpacking Your Game Files",id:"unpacking-your-game-files",level:2},{value:"Repacking Your Game Files",id:"repacking-your-game-files",level:2},{value:"Getting a Stamp",id:"getting-a-stamp",level:3},{value:"Repacking with a Stamp",id:"repacking-with-a-stamp",level:3},{value:"Repacking without a Stamp",id:"repacking-without-a-stamp",level:3},{value:"That&#39;s all, folks!",id:"thats-all-folks",level:2}];function c(e){const a={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,n.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(a.header,{children:(0,t.jsx)(a.h1,{id:"unpacking-and-repacking-game-files",children:"Unpacking and Repacking Game Files"})}),"\n",(0,t.jsxs)(a.p,{children:["This guide serves to provide a very basic guide to unpacking and repacking the game's asset files (contained in ",(0,t.jsx)(a.code,{children:"res.pak"}),")."]}),"\n",(0,t.jsx)(a.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,t.jsxs)(a.ul,{children:["\n",(0,t.jsx)(a.li,{children:"A computer (running Windows for this guide, although the alivecells ModTools can be compiled with any dotnet toolchain)"}),"\n",(0,t.jsx)(a.li,{children:"An Internet connection"}),"\n",(0,t.jsx)(a.li,{children:"Some level of comfort with a terminal (eg. ability to run a script with arguments, understanding of absolute vs. relative paths)"}),"\n"]}),"\n",(0,t.jsx)(a.h2,{id:"what-is-a-pak-file",children:"What is a PAK file?"}),"\n",(0,t.jsxs)(a.p,{children:["A PAK file is a bundle of files - not unlike a GNU ",(0,t.jsx)(a.code,{children:"tar"})," archive or a ZIP file. Dead Cells loads these files at runtime to get access to the game's assets."]}),"\n",(0,t.jsx)(a.admonition,{type:"note",children:(0,t.jsxs)(a.p,{children:["On a technical side of things, the only thing that differentiates a PAK file from a ",(0,t.jsx)(a.code,{children:"tar"})," archive or another archive format is that it indexes the offsets of all files within the header section, which means the game can load the entire contained filesystem tree into memory much more quickly than having to fully load the entire archive into memory."]})}),"\n",(0,t.jsx)(a.h3,{id:"pak-file-versions",children:"PAK File Versions"}),"\n",(0,t.jsx)(a.p,{children:"The PAK file format has seen two major versions in Dead Cells:"}),"\n",(0,t.jsxs)(a.p,{children:[(0,t.jsx)(a.code,{children:"v1"})," PAKs contain a game-version-specific \"stamp\", which serves to verify the version of the game that the PAK is loading on and to prevent direct modification of the game files. However, this wasn't done securely and is easily bypassed. These were first introduced in v35, and don't apply to official mod PAKs, just the main game ",(0,t.jsx)(a.code,{children:"res.pak"}),". These also can't be generated with the official ",(0,t.jsx)(a.code,{children:"PAKTool.exe"})," included in the game's ",(0,t.jsx)(a.code,{children:"ModTools"}),"."]}),"\n",(0,t.jsxs)(a.p,{children:[(0,t.jsx)(a.code,{children:"v0"})," PAKs don't contain a stamp and instead are just normal archives. These were present as the main ",(0,t.jsx)(a.code,{children:"res.pak"})," prior to v35, and as official supported mod PAKs."]}),"\n",(0,t.jsx)(a.h2,{id:"getting-a-better-paktool",children:"Getting a Better PAKTool"}),"\n",(0,t.jsxs)(a.p,{children:["Since the game's official PAKTool can't handle v1 PAKs, we need to use a better version of the PAKTool. This is provided by ",(0,t.jsx)(a.code,{children:"alivecells"}),". ",(0,t.jsx)(a.a,{href:"https://github.com/N3rdL0rd/alivecells/releases/tag/paktool-v0.1a",children:"Download it here"})," and unzip it somewhere."]}),"\n",(0,t.jsx)(a.h2,{id:"unpacking-your-game-files",children:"Unpacking Your Game Files"}),"\n",(0,t.jsx)(a.p,{children:"In order to unpack the game files, we need to identify three things:"}),"\n",(0,t.jsxs)(a.ul,{children:["\n",(0,t.jsx)(a.li,{children:"Where the PAKTool is"}),"\n",(0,t.jsxs)(a.li,{children:["Where the game's ",(0,t.jsx)(a.code,{children:"res.pak"})," is"]}),"\n",(0,t.jsx)(a.li,{children:"Where we want the extracted files to go"}),"\n"]}),"\n",(0,t.jsxs)(a.p,{children:["The first two should be obvious - one is wherever you unzipped the file from the last step, and the other is usually ",(0,t.jsx)(a.code,{children:"C:\\Program Files (x86)\\Steam\\steamapps\\common\\Dead Cells\\res.pak"}),". The destination folder can be whatever you choose, but usually it'll be ",(0,t.jsx)(a.code,{children:"C:\\Program Files (x86)\\Steam\\steamapps\\common\\Dead Cells\\unpacked"}),". Let's assume your PAKTool is at ",(0,t.jsx)(a.code,{children:"C:\\Users\\You\\Downloads\\PAKTool-alivecells-0.1a\\PAKTool.exe"}),". Open up a terminal and run:"]}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-cmd",children:'C:\\Users\\You\\Downloads\\PAKTool-alivecells-0.1a\\PAKTool.exe expand "C:\\Program Files (x86)\\Steam\\steamapps\\common\\Dead Cells\\unpacked" "C:\\Program Files (x86)\\Steam\\steamapps\\common\\Dead Cells\\res.pak"\n'})}),"\n",(0,t.jsxs)(a.p,{children:["Then, look in ",(0,t.jsx)(a.code,{children:"C:\\Program Files (x86)\\Steam\\steamapps\\common\\Dead Cells\\unpacked"})," to find your unpacked game files! You can make any changes you want to these files, then proceed to:"]}),"\n",(0,t.jsx)(a.h2,{id:"repacking-your-game-files",children:"Repacking Your Game Files"}),"\n",(0,t.jsxs)(a.p,{children:["If you're on v35 or higher, please follow this next step. Otherwise, skip it and move on to ",(0,t.jsx)(a.a,{href:"#repacking-without-a-stamp",children:"Repacking without a Stamp"}),"."]}),"\n",(0,t.jsx)(a.h3,{id:"getting-a-stamp",children:"Getting a Stamp"}),"\n",(0,t.jsxs)(a.p,{children:["In order to repack game files and have the game read from them past v35, you must get a ",(0,t.jsx)(a.em,{children:"stamp"}),", a unique signature of a specific version of the game. There are a number of ways to get this value, but this guide only covers one."]}),"\n",(0,t.jsxs)(a.p,{children:["First, go to ",(0,t.jsx)(a.a,{href:"https://n3rdl0rd.github.io/alivecells/stamptool/",children:"this site"}),". Then, drag and drop (or browse for) your game's ",(0,t.jsx)(a.code,{children:"res.pak"})," and click ",(0,t.jsx)(a.code,{children:"Calculate"}),". This should spit out a stamp, which is a random stream of hexadecimal characters. For the latest version of the game (at the time of writing), the stamp is ",(0,t.jsx)(a.code,{children:"0022228129b0973a12d14548434b3741debcd3a38734f1e0dd1f3b3f7acdd91c"}),"."]}),"\n",(0,t.jsx)(a.h3,{id:"repacking-with-a-stamp",children:"Repacking with a Stamp"}),"\n",(0,t.jsxs)(a.p,{children:["This is for v35+. If you're on a version <v35, then instead use ",(0,t.jsx)(a.a,{href:"#repacking-without-a-stamp",children:"Repacking without a Stamp"}),"."]}),"\n",(0,t.jsx)(a.p,{children:"Again, assuming the same paths as before, open a terminal and run:"}),"\n",(0,t.jsx)(a.admonition,{type:"warning",children:(0,t.jsx)(a.p,{children:"This will overwrite the existing res.pak with your modifications. If you ever want to revert these changes easily, you can just verify the game's integrity from Steam."})}),"\n",(0,t.jsx)(a.admonition,{type:"danger",children:(0,t.jsxs)(a.p,{children:["Make sure you replace ",(0,t.jsx)(a.code,{children:"<YOUR STAMP HERE>"})," in the command with your stamp that you found earlier! If you don't do this, a default will be used, which probably won't load correctly."]})}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-cmd",children:'C:\\Users\\You\\Downloads\\PAKTool-alivecells-0.1a\\PAKTool.exe collapsev1 "C:\\Program Files (x86)\\Steam\\steamapps\\common\\Dead Cells\\unpacked" "C:\\Program Files (x86)\\Steam\\steamapps\\common\\Dead Cells\\res.pak" -s <YOUR STAMP HERE>\n'})}),"\n",(0,t.jsx)(a.h3,{id:"repacking-without-a-stamp",children:"Repacking without a Stamp"}),"\n",(0,t.jsx)(a.admonition,{type:"warning",children:(0,t.jsx)(a.p,{children:"This will overwrite the existing res.pak with your modifications. If you ever want to revert these changes easily, you can just verify the game's integrity from Steam."})}),"\n",(0,t.jsx)(a.p,{children:"Again, assuming the same paths as before, open a terminal and run:"}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-cmd",children:'C:\\Users\\You\\Downloads\\PAKTool-alivecells-0.1a\\PAKTool.exe collapse "C:\\Program Files (x86)\\Steam\\steamapps\\common\\Dead Cells\\unpacked" "C:\\Program Files (x86)\\Steam\\steamapps\\common\\Dead Cells\\res.pak"\n'})}),"\n",(0,t.jsx)(a.h2,{id:"thats-all-folks",children:"That's all, folks!"}),"\n",(0,t.jsx)(a.p,{children:"Relaunch your game and you should see your asset updates. Have fun!"})]})}function h(e={}){const{wrapper:a}={...(0,n.R)(),...e.components};return a?(0,t.jsx)(a,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}}}]);